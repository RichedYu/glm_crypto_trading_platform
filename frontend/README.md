# GLM åŠ å¯†è´§å¸äº¤æ˜“å¹³å° Â· å‰ç«¯å¯è§†åŒ–ç³»ç»Ÿéœ€æ±‚

> æ„å»ºä¸€ä¸ªä¸“ä¸šçº§ã€å®æ—¶äº¤äº’çš„ Web æ§åˆ¶å°ï¼Œä¸º GLM é‡åŒ–å¹³å°æä¾›äº¤æ˜“ç›‘æ§ã€å¸‚åœºæƒ…ç»ªã€ç­–ç•¥ç®¡ç†ä¸é£æ§æ´å¯Ÿã€‚

---

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

- **ç›®æ ‡**ï¼šæ‰“é€ å®æ—¶ã€æ¨¡å—åŒ–ã€å¯æ‰©å±•çš„å‰ç«¯ï¼Œä½¿é‡åŒ–å›¢é˜Ÿå’Œè¿è¥èƒ½åœ¨ä¸€ä¸ªç•Œé¢ä¸­æŸ¥çœ‹è¡Œæƒ…ã€ç­–ç•¥ã€é£æ§ä¸æƒ…ç»ªã€‚
- **æ•°æ®æ¥æº**ï¼šäº¤æ˜“æœåŠ¡ï¼ˆ/api/v1/â€¦ï¼‰ã€ç­–ç•¥æœåŠ¡ã€æƒ…ç»ªæœåŠ¡ä»¥åŠ WebSocket å¸‚åœºæµã€‚
- **äº¤ä»˜å½¢å¼**ï¼šReact + TypeScript + Vite SPAï¼Œé…å¥— Storybookã€API å¯¹æ¥æ–‡æ¡£å’Œéƒ¨ç½²æŒ‡å—ã€‚

---

## ğŸ“‹ æŠ€æœ¯æ ˆ

| ç±»åˆ« | é€‰å‹ |
|------|------|
| å‰ç«¯æ¡†æ¶ | React 18+ã€TypeScript |
| çŠ¶æ€ç®¡ç† | Zustand æˆ– Redux Toolkitï¼ˆæ ¹æ®å›¢é˜Ÿåå¥½ï¼‰ |
| UI ç»„ä»¶ | Ant Design æˆ– shadcn/uiï¼ˆéœ€æ”¯æŒæš—è‰²ä¸»é¢˜ï¼‰ |
| æ ·å¼ç³»ç»Ÿ | Tailwind CSSï¼ˆç»Ÿä¸€ä¸»é¢˜ã€å¿«é€Ÿå¼€å‘ï¼‰ |
| å›¾è¡¨åº“ | TradingView Lightweight Chartsã€Recharts/ECharts |
| æ•°æ®å±‚ | React Queryï¼ˆAPI + WebSocket åŒæ­¥ï¼‰ã€Axios |
| å®æ—¶é€šä¿¡ | Native WebSocket + è‡ªå®šä¹‰ hooks |
| æ„å»ºå·¥å…· | Vite |
| å·¥å…·é“¾ | ESLintã€Prettierã€Huskyï¼ˆConventional Commitsï¼‰ã€Storybook |

---

## ğŸ§± æ¶æ„åŸåˆ™

1. **æ¨¡å—åŒ–**ï¼šæŒ‰ä¸šåŠ¡åŸŸç»„ç»‡ï¼ˆäº¤æ˜“/æƒ…ç»ª/ç­–ç•¥/é£æ§ï¼‰ï¼Œæ¯ä¸ªæ¨¡å—è‡ªå¸¦ storeã€servicesã€componentsã€‚
2. **æ’ä»¶å¼æ‰©å±•**ï¼šç­–ç•¥æ¨¡å—æ”¯æŒåç»­æ–°å¢ç­–ç•¥å¡ç‰‡ã€æŒ‡æ ‡ã€å›æµ‹è§†å›¾ã€‚
3. **ä½“éªŒä¼˜å…ˆ**ï¼šå“åº”å¼å¸ƒå±€ã€æ·±è‰²é»˜è®¤ä¸»é¢˜ï¼Œå¯åˆ‡æ¢äº®è‰²ï¼›æ‰€æœ‰è¡¨æ ¼å…·å¤‡ç­›é€‰/æ’åº/å¯¼å‡ºã€‚
4. **æ€§èƒ½**ï¼šè·¯ç”±æ‡’åŠ è½½ã€è™šæ‹Ÿåˆ—è¡¨ã€Web Worker å¤„ç†é‡è®¡ç®—ã€React Query ç¼“å­˜ã€‚
5. **ä¸“ä¸šåº¦**ï¼šéµå®ˆé‡‘èæ•°æ®ç²¾åº¦ï¼ˆä»·æ ¼ 8 ä½ã€æ•°é‡ 4 ä½ï¼‰ï¼ŒæŒ‡æ ‡é“¾è·¯æ¸…æ™°ã€‚

---

## ğŸ¨ UI/UX è§„èŒƒ

- **ä¸»é¢˜è‰²**ï¼šæ¶¨ `#00C087`ã€è·Œ `#FF4D4F`ã€ä¸»è‰² `#1890FF`ã€èƒŒæ™¯ `#0B0E11`/`#141414`ã€‚
- **å¸ƒå±€**ï¼š1920Ã—1080 æ¡Œé¢ä¸ºä¸»ï¼Œå¹³æ¿ 1024Ã—768 è‡ªé€‚åº”ï¼›é¡¶æ  + ä¾§è¾¹å¯¼èˆª + æ¨¡å—åŒ–ç½‘æ ¼ã€‚
- **ç»„ä»¶è§„èŒƒ**ï¼š
  - Loading/Skeleton è¦†ç›–æ‰€æœ‰å¼‚æ­¥åŒºåŸŸï¼Œç©ºçŠ¶æ€å±•ç¤º friendly æ–‡æ¡ˆã€‚
  - é”™è¯¯æç¤ºå…·å¤‡â€œé‡è¯•/å›é€€â€æ“ä½œã€‚
  - æ•°æ®å¯¼å‡ºæŒ‰é’®æ”¯æŒ CSV/JSONã€‚
- **å…³é”®æŒ‡æ ‡**ï¼šPnLã€Sharpeã€Win Rateã€Max Drawdownã€é£é™©æš´éœ²ã€æƒ…ç»ªæŒ‡æ•°ã€‚

---

## ğŸ“Š åŠŸèƒ½æ¨¡å—

### 1. äº¤æ˜“ç›‘æ§ä»ªè¡¨ç›˜

- **å®æ—¶æŒä»“å¡ç‰‡**ï¼šäº¤æ˜“å¯¹ã€æ–¹å‘ã€å…¥åœº/å½“å‰ä»·ã€æœªå®ç°ç›ˆäº%ã€æŒä»“æ—¶é—´ï¼›æ”¯æŒå¹³ä»“ã€æ”¹æ­¢ç›ˆæ­¢æŸã€‚
- **è®¢å•æµæ°´è¡¨**ï¼šæ—¶é—´ã€ç±»å‹ã€æ–¹å‘ã€æ•°é‡ã€ä»·æ ¼ã€æ‰‹ç»­è´¹ã€çŠ¶æ€ï¼›ç­›é€‰/æ’åº/åˆ†é¡µ/å¯¼å‡ºã€‚
- **å®æ—¶ K çº¿å›¾**ï¼šTradingView å›¾å±‚ï¼ŒæŒ‡æ ‡ (MA/MACD/RSI/BBands)ã€å¤šå‘¨æœŸã€æ ‡æ³¨å…¥åœºå’Œæ­¢ç›ˆæ­¢æŸã€‚
- **è´¦æˆ·æ¦‚è§ˆ**ï¼šæ€»èµ„äº§ã€å¯ç”¨/å†»ç»“ã€ä»Šæ—¥/ç´¯è®¡ç›ˆäºã€èƒœç‡ã€é£é™©æš´éœ²ã€‚
- **æ ¸å¿ƒæ¥å£**ï¼š
  - `GET /api/v1/positions`
  - `GET /api/v1/orders?status=all`
  - `GET /api/v1/account/balance`
  - `POST /api/v1/orders/close`
  - `WS /ws/market/{symbol}`

### 2. å¸‚åœºæƒ…ç»ªåˆ†æ

- **æƒ…ç»ªæŒ‡æ•°ä»ªè¡¨**ï¼š-100 ~ +100ï¼Œæ˜¾ç¤ºå½“å‰å€¼å’Œ 24h å˜åŒ–ã€‚
- **æƒ…ç»ªè¶‹åŠ¿å›¾**ï¼šæƒ…ç»ª vs BTC ä»·æ ¼ï¼Œå…³é”®äº‹ä»¶æ ‡æ³¨ã€‚
- **çƒ­é—¨è¯é¢˜æ¦œ**ï¼šè¯é¢˜ã€çƒ­åº¦ã€å€¾å‘ï¼›ç‚¹å‡»å±•å¼€ keywords/tweetsã€‚
- **AI åˆ†ææ‘˜è¦**ï¼šGLM ç”Ÿæˆ 150 å­—æ€»ç»“ + ä¿¡å·æç¤ºã€‚
- **æ ¸å¿ƒæ¥å£**ï¼š
  - `GET /api/v1/sentiment/current`
  - `GET /api/v1/sentiment/history?days=7`
  - `GET /api/v1/sentiment/topics/trending`
  - `GET /api/v1/sentiment/insights`

### 3. ç­–ç•¥ç®¡ç†ä¸­å¿ƒ

- **ç­–ç•¥å¡ç‰‡**ï¼šå±•ç¤º S1/S2â€¦ çŠ¶æ€ã€æ”¶ç›Šã€èƒœç‡ã€äº¤æ˜“æ¬¡æ•°ï¼›æ“ä½œå¯åœã€ç¼–è¾‘ã€è¯¦æƒ…ã€‚
- **å‚æ•°é…ç½®é¢æ¿**ï¼šåŠ¨æ€è¡¨å•ï¼ˆäº¤æ˜“å¯¹ã€å‘¨æœŸã€é£é™©æ¯”ä¾‹ç­‰ï¼‰ï¼Œå«é¢„è®¾æ¨¡æ¿ä¸å®æ—¶æ ¡éªŒã€‚
- **å›æµ‹ç»“æœ**ï¼šå‡€å€¼æ›²çº¿ vs åŸºå‡†ã€Performance è¡¨ã€æ—¶é—´è½´äº¤æ˜“æ˜ç»†ã€‚
- **ç­–ç•¥å¯¹æ¯”**ï¼šæ”¶ç›Šæ›²çº¿ã€é›·è¾¾è¯„åˆ†ã€‚
- **æ ¸å¿ƒæ¥å£**ï¼š
  - `GET /api/v1/strategies`
  - `POST /api/v1/strategies/{id}/start|stop`
  - `PUT /api/v1/strategies/{id}/config`
  - `GET /api/v1/strategies/{id}/backtest`

### 4. é£é™©æ§åˆ¶é¢æ¿

- **é£é™©é›·è¾¾**ï¼šä»“ä½/æµåŠ¨æ€§/æ³¢åŠ¨/é›†ä¸­åº¦é£é™©ï¼Œé¢œè‰²åˆ†çº§ã€‚
- **å®æ—¶å‘Šè­¦åˆ—è¡¨**ï¼šæ­¢æŸè§¦å‘ã€ä»“ä½è¶…é™ã€ç³»ç»Ÿå¼‚å¸¸ã€å¸‚åœºå¼‚åŠ¨ï¼›æ”¯æŒæ ‡è®°/å¤„ç†ã€‚
- **èµ„é‡‘æ›²çº¿**ï¼šå‡€å€¼é¢ç§¯å›¾+å›æ’¤é˜´å½±ï¼Œå…³é”®äº‹ä»¶æ ‡è®°ã€‚
- **å‹åŠ›æµ‹è¯•**ï¼šè¾“å…¥åœºæ™¯ã€è¾“å‡ºæŸå¤±/ä¿è¯é‡‘/å¼ºå¹³é£é™©ã€‚
- **æ ¸å¿ƒæ¥å£**ï¼š
  - `GET /api/v1/risk/metrics`
  - `GET /api/v1/risk/alerts?status=new`
  - `GET /api/v1/risk/equity-curve`
  - `POST /api/v1/risk/stress-test`

---

## ğŸ—‚ é¡¹ç›®ç»“æ„

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # é€šç”¨ç»„ä»¶ (charts/forms/layouts)
â”‚   â”œâ”€â”€ modules/
â”‚   â”‚   â”œâ”€â”€ trading/
â”‚   â”‚   â”œâ”€â”€ sentiment/
â”‚   â”‚   â”œâ”€â”€ strategy/
â”‚   â”‚   â””â”€â”€ risk/
â”‚   â”œâ”€â”€ services/            # api.ts / websocket.ts / types.ts
â”‚   â”œâ”€â”€ stores/              # Zustand/Redux slices
â”‚   â”œâ”€â”€ hooks/               # useWebSocket/useRealTimeData/useChartData...
â”‚   â”œâ”€â”€ utils/               # formatters/validators/calculations
â”‚   â””â”€â”€ App.tsx
â”œâ”€â”€ public/
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.ts
```

---

## ğŸ§  çŠ¶æ€ç®¡ç†ç¤ºä¾‹

```ts
// stores/trading.ts
import create from 'zustand'
import { api } from '@/services/api'

interface TradingState {
  positions: Position[]
  orders: Order[]
  balance: AccountBalance | null
  fetchPositions: () => Promise<void>
  closePosition: (id: string) => Promise<void>
}

export const useTradingStore = create<TradingState>((set) => ({
  positions: [],
  orders: [],
  balance: null,
  fetchPositions: async () => {
    const data = await api.get('/positions')
    set({ positions: data })
  },
  closePosition: async (id) => {
    await api.post('/orders/close', { position_id: id })
    await Promise.all([/* refresh positions/orders */])
  },
}))
```

---

## ğŸ”Œ WebSocket Hook

```ts
import { useEffect, useState } from 'react'

export const useMarketData = (symbol: string) => {
  const [price, setPrice] = useState<number>(0)

  useEffect(() => {
    const ws = new WebSocket(`${import.meta.env.VITE_WS_BASE}/ws/market/${symbol}`)
    ws.onmessage = (event) => {
      const payload = JSON.parse(event.data)
      setPrice(payload.price)
    }
    return () => ws.close()
  }, [symbol])

  return { price }
}
```

---

## ğŸªŸ TradingView å›¾è¡¨é…ç½®

```ts
export const chartOptions = {
  layout: {
    background: { color: '#0B0E11' },
    textColor: '#D9D9D9',
  },
  grid: {
    vertLines: { color: '#1f2937' },
    horzLines: { color: '#1f2937' },
  },
  crosshair: { mode: CrosshairMode.Normal },
  timeScale: { timeVisible: true, secondsVisible: false },
}
```

---

## ğŸš€ å¼€å‘é˜¶æ®µ

| Phase | å†…å®¹ |
|-------|------|
| **MVP** | äº¤æ˜“ä»ªè¡¨ç›˜ï¼ˆæŒä»“/è®¢å•/K çº¿ï¼‰ã€åŸºç¡€å¸ƒå±€ã€WebSocket å®æ—¶è¡Œæƒ… |
| **Phase 2** | æƒ…ç»ªåˆ†æã€ç­–ç•¥ç®¡ç†ã€å›æµ‹å±•ç¤º |
| **Phase 3** | é£æ§é¢æ¿ã€å¤šç­–ç•¥å¯¹æ¯”ã€æ•°æ®å¯¼å‡º |
| **Phase 4** | æ€§èƒ½ä¼˜åŒ–ã€ç§»åŠ¨ç«¯é€‚é…ã€å›½é™…åŒ– |

---

## âš™ï¸ æ€§èƒ½ç­–ç•¥

- è·¯ç”±æ‡’åŠ è½½ï¼Œé¦–å± < 2sã€‚
- `react-window` è™šæ‹Ÿåˆ—è¡¨ã€‚
- React Query æ™ºèƒ½ç¼“å­˜ä¸å¤±æ•ˆç­–ç•¥ã€‚
- è¾“å…¥/æ»šåŠ¨é˜²æŠ–èŠ‚æµã€‚
- é‡å‹æŠ€æœ¯æŒ‡æ ‡æ¬åˆ° WebWorkerã€‚

---

## ğŸ” å®‰å…¨è¦æ±‚

1. JWT å­˜å‚¨äº HttpOnly Cookieï¼Œé…å¥—åˆ·æ–°ç­–ç•¥ã€‚
2. è§’è‰²éš”ç¦»ï¼šç®¡ç†å‘˜ / äº¤æ˜“å‘˜ / è§‚å¯Ÿè€…ã€‚
3. API Key æ°¸ä¸ä¸‹å‘åˆ°å‰ç«¯ï¼Œåªæš´éœ²å¿…è¦æ•°æ®ã€‚
4. XSS é˜²æŠ¤ï¼Œæ‰€æœ‰ç”¨æˆ·è¾“å…¥ sanitizeã€‚
5. å…¨ç«™ HTTPSï¼Œä¸¥æ ¼ CSPã€‚

---

## ğŸ“¦ äº¤ä»˜ç‰©

1. React + TS æºç ï¼ˆå« Lint/Format é…ç½®ï¼‰ã€‚
2. Storybook ç»„ä»¶æ–‡æ¡£ã€‚
3. API è°ƒç”¨ç¤ºä¾‹ä¸é”™è¯¯ç è¯´æ˜ã€‚
4. éƒ¨ç½²æŒ‡å—ï¼ˆDocker + Nginxï¼‰ã€‚
5. ç”¨æˆ·æ‰‹å†Œä¸æ“ä½œæµç¨‹ã€‚

---

## ğŸ“‹ æ³¨æ„äº‹é¡¹

- ä½¿ç”¨ `decimal.js` å¤„ç†é‡‘é¢ã€‚
- æ—¶é—´ç»Ÿä¸€ UTCï¼Œå±•ç¤ºå±‚å†è½¬æ¢æœ¬åœ°ã€‚
- é”™è¯¯é™çº§ç­–ç•¥ & é‡è¯•æç¤ºã€‚
- Skeleton/Empty ç»„ä»¶è¦†ç›–æ‰€æœ‰å¼‚æ­¥åœºæ™¯ã€‚
- å‘½åéµå¾ªé©¼å³°ï¼ˆå˜é‡ï¼‰/kebab-caseï¼ˆæ–‡ä»¶å¤¹ï¼‰ï¼Œæäº¤éµå¾ª Conventional Commitsã€‚

---

## ğŸ¨ è®¾è®¡å‚è€ƒ

- TradingViewï¼ˆå›¾è¡¨ä¸æŒ‡æ ‡ï¼‰
- Binanceï¼ˆè®¢å•é¢æ¿ï¼‰
- 3Commasï¼ˆç­–ç•¥é…ç½®/å›æµ‹ï¼‰
- Grafanaï¼ˆå®æ—¶ä»ªè¡¨ç›˜ï¼‰

---

## ğŸ¤ åä½œè¦æ±‚

- ESLint + Prettier + Husky åœ¨æäº¤å‰è‡ªåŠ¨æ‰§è¡Œã€‚
- æ ¸å¿ƒ Hooks/ç»„ä»¶æä¾› JSDoc æ³¨é‡Šã€‚
- Jest + React Testing Library è¦†ç›–å…³é”®é€»è¾‘ã€‚
- PR éœ€é™„æˆªå›¾æˆ– Loom è§†é¢‘å±•ç¤ºäº¤äº’ã€‚

---

> æœŸæœ›æ•ˆæœï¼šä¸€ä¸ªç¾è§‚ã€ä¸“ä¸šã€å¯é çš„å¯è§†åŒ– cockpitï¼Œä¸ºäº¤æ˜“å†³ç­–æä¾›å®æ—¶ã€å¯æ“ä½œçš„æ•°æ®æ´å¯Ÿã€‚
